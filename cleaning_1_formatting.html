<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Diego Pinto">

<title>Data Cleaning: Formatting Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="cleaning_1_formatting_files/libs/clipboard/clipboard.min.js"></script>
<script src="cleaning_1_formatting_files/libs/quarto-html/quarto.js"></script>
<script src="cleaning_1_formatting_files/libs/quarto-html/popper.min.js"></script>
<script src="cleaning_1_formatting_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cleaning_1_formatting_files/libs/quarto-html/anchor.min.js"></script>
<link href="cleaning_1_formatting_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cleaning_1_formatting_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cleaning_1_formatting_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cleaning_1_formatting_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cleaning_1_formatting_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#formattingrecoding" id="toc-formattingrecoding" class="nav-link active" data-scroll-target="#formattingrecoding">Formatting/Recoding</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#renaming-some-observed-variables" id="toc-renaming-some-observed-variables" class="nav-link" data-scroll-target="#renaming-some-observed-variables">Renaming Some Observed Variables</a></li>
  <li><a href="#recoding" id="toc-recoding" class="nav-link" data-scroll-target="#recoding">Recoding</a>
  <ul class="collapse">
  <li><a href="#recode-school" id="toc-recode-school" class="nav-link" data-scroll-target="#recode-school">Recode “school”</a></li>
  <li><a href="#recode-race." id="toc-recode-race." class="nav-link" data-scroll-target="#recode-race.">Recode “race”.</a></li>
  <li><a href="#combine-race-into-fewer-categories" id="toc-combine-race-into-fewer-categories" class="nav-link" data-scroll-target="#combine-race-into-fewer-categories">Combine Race into Fewer Categories</a></li>
  <li><a href="#recode-hispanic-latino." id="toc-recode-hispanic-latino." class="nav-link" data-scroll-target="#recode-hispanic-latino.">Recode “hispanic-latino”.</a></li>
  <li><a href="#recode-gender" id="toc-recode-gender" class="nav-link" data-scroll-target="#recode-gender">Recode “gender”</a></li>
  <li><a href="#recode-currentschoolmusic." id="toc-recode-currentschoolmusic." class="nav-link" data-scroll-target="#recode-currentschoolmusic.">Recode “currentSchoolMusic”.</a></li>
  <li><a href="#replace-na-in-optional-survey-text-boxes-with-none." id="toc-replace-na-in-optional-survey-text-boxes-with-none." class="nav-link" data-scroll-target="#replace-na-in-optional-survey-text-boxes-with-none.">Replace NA in optional survey text boxes with “None”.</a></li>
  </ul></li>
  <li><a href="#dealing-with-open-ended-responses" id="toc-dealing-with-open-ended-responses" class="nav-link" data-scroll-target="#dealing-with-open-ended-responses">Dealing with open-ended responses</a>
  <ul class="collapse">
  <li><a href="#correcting-inconsistent-data-in-currentschoolmusic_other." id="toc-correcting-inconsistent-data-in-currentschoolmusic_other." class="nav-link" data-scroll-target="#correcting-inconsistent-data-in-currentschoolmusic_other.">Correcting inconsistent data in “currentSchoolMusic_other”.</a></li>
  <li><a href="#in-instrument-change-negative-answers-e.g.-none-i-do-not-play-any-instrument-to-na." id="toc-in-instrument-change-negative-answers-e.g.-none-i-do-not-play-any-instrument-to-na." class="nav-link" data-scroll-target="#in-instrument-change-negative-answers-e.g.-none-i-do-not-play-any-instrument-to-na.">In “instrument,” change negative answers (e.g., None, I do not play any instrument) to “NA.”</a></li>
  <li><a href="#recode-familymusic" id="toc-recode-familymusic" class="nav-link" data-scroll-target="#recode-familymusic">Recode “familyMusic”</a></li>
  </ul></li>
  <li><a href="#save-formatted-dataset-as-.csv" id="toc-save-formatted-dataset-as-.csv" class="nav-link" data-scroll-target="#save-formatted-dataset-as-.csv">Save formatted dataset as .csv</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Data Cleaning: Formatting Data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Diego Pinto </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="formattingrecoding" class="level1">
<h1>Formatting/Recoding</h1>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Desktop/R_projects/msc"</span>) <span class="co">#Set the working directory path </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># Clear Global Environment</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#load packages</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>The dataset in “middle_school_music_mindsets_raw_may.csv” (<em>N</em> <em>=</em> 495) represents data collected in May 2023 hrough paper-and-pencil surveys, entered to a spreadsheet manyally, and revised for data entry errors in Excel before being imported into R (I will explain the data entry revision separately). That dataset is “raw” in the sense that it was not yet cleaned for analysis. I saved the .csv files into two dataframes. While I continuously modified the “data” dataframe over the data cleaning process, the “data_raw” dataframe will always contain the original dataset. The dataset in “middle_school_music_mindsets_raw_may.csv” (<em>N =</em> 210) represents data collected in September 2023.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data_may <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/middle_school_music_mindsets_raw_may.csv"</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"race"</span> <span class="ot">=</span> <span class="st">"c"</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>data_september <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/middle_school_music_mindsets_raw_september.csv"</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"race"</span> <span class="ot">=</span> <span class="st">"c"</span>))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_may,data_september) <span class="co">#combine datasets</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="renaming-some-observed-variables" class="level2">
<h2 class="anchored" data-anchor-id="renaming-some-observed-variables">Renaming Some Observed Variables</h2>
<p>I changed some variables’ names from codes to texts or shortened those which were too long.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">currentSchoolMusic =</span> school_music_class,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">currentSchoolMusic_other =</span> school_music_class_other,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">instrument =</span> s2_7,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">familyMusic =</span> s2_8,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">schoolChoir =</span> s2_9,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">schoolInstrumental =</span> s2_10,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">schoolExtracurricular =</span> s2_11,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">outsideChoir =</span> s2_12,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">outsideInstrumental =</span> s2_13,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">privateLesson =</span> s2_14,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">selfTaught =</span> s2_15)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="recoding" class="level2">
<h2 class="anchored" data-anchor-id="recoding">Recoding</h2>
<p>In the raw dataset, all survey responses were entered as numbers, including data from categorical variables. To facilitate data analysis and interpretation in R, I recoded data from all categorical variables from numbers to text. Recoding will also make data understandable when sharing dataset with other researchers.</p>
<section id="recode-school" class="level3">
<h3 class="anchored" data-anchor-id="recode-school">Recode “school”</h3>
<p>In the raw dataset, schools were labeled as “1”, “2”, or “3.” To facilitate data analysis and interpretation, I recoded “1” as “A”, “2” as “B”, and “3” as “C”.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">school =</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_match</span>(school,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"A"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">2</span> <span class="sc">~</span> <span class="st">"B"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">3</span> <span class="sc">~</span> <span class="st">"C"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="recode-race." class="level3">
<h3 class="anchored" data-anchor-id="recode-race.">Recode “race”.</h3>
<p>There were six categories under “race” (matching those in the US Census), and survey participants could select all that applied to them. I inspected the combinations resulting from participants’ selections (besides 1 through 6 one-item responses) to determine an effective way to recode the data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data<span class="sc">$</span>race) <span class="co">#Inspect outputs, including more than one answer for more than one race</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "5"       "3,5"     "3"       "2"       "1"       "6"       "1,5"    
 [8] "5,6"     "2,6"     "2,5"     "3,6"     NA        "1,5,6"   "3,5,6"  
[15] "4,5"     "4"       "3,4"     "2,3"     "1,2,3,6" "2,5,6"   "3,4,5"  </code></pre>
</div>
</div>
<p>Based on the output, I chose to recode “,” as ” and” for clarity.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"1"</span>, <span class="st">"American Indian or Alaska Native"</span>),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"2"</span>, <span class="st">"Asian"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"3"</span>, <span class="st">"Black or African American"</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"4"</span>, <span class="st">"Native Hawaiian or Other Pacific Islander"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"5"</span>, <span class="st">"White"</span>),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"6"</span>, <span class="st">"Some Other Race"</span>),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace_all</span>(race, <span class="st">","</span>, <span class="st">" and "</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="combine-race-into-fewer-categories" class="level3">
<h3 class="anchored" data-anchor-id="combine-race-into-fewer-categories">Combine Race into Fewer Categories</h3>
<p>Because some categories were were below n = 10, I recoded responses containing “and” as “Two or More Races” to facilitate analysis and to protect participants’ identity when sharing dataset. Reporting original count in the Methods section might still be useful.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Count with raw responses</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(data, race) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 2
   race                                                                        n
   &lt;chr&gt;                                                                   &lt;int&gt;
 1 American Indian or Alaska Native                                            8
 2 American Indian or Alaska Native and Asian and Black or African Americ…     1
 3 American Indian or Alaska Native and White                                 10
 4 American Indian or Alaska Native and White and Some Other Race              1
 5 Asian                                                                      26
 6 Asian and Black or African American                                         1
 7 Asian and Some Other Race                                                   1
 8 Asian and White                                                             8
 9 Asian and White and Some Other Race                                         1
10 Black or African American                                                  66
# ℹ 11 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">as.character</span>(ifelse</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                             (<span class="fu">str_detect</span>(race, <span class="st">"and"</span>), <span class="st">"Two or More Races"</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">as.character</span>(race)))) <span class="co">#combining responses which selected two or more races as a single category</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Count after change</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(data, race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  race                                 n
  &lt;chr&gt;                            &lt;int&gt;
1 American Indian or Alaska Native     8
2 Asian                               26
3 Black or African American           66
4 Some Other Race                     24
5 Two or More Races                   54
6 White                              523
7 &lt;NA&gt;                                 4</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Since there are less than 10 observations for 'American Indian or Alaska Native', include to category 'Some Other Race' </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="st">"American Indian or Alaska Native"</span>, <span class="st">"Some Other Race"</span>, race))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Count after change</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(data, race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  race                          n
  &lt;chr&gt;                     &lt;int&gt;
1 Asian                        26
2 Black or African American    66
3 Some Other Race              32
4 Two or More Races            54
5 White                       523
6 &lt;NA&gt;                          4</code></pre>
</div>
</div>
</section>
<section id="recode-hispanic-latino." class="level3">
<h3 class="anchored" data-anchor-id="recode-hispanic-latino.">Recode “hispanic-latino”.</h3>
<p>In the raw dataset, the ethnicity variable (“Are you Hispanic or Latino?”) used “1” for “Yes” and 2 for “No.” To facilidate data analysis and interpretation, I converted the data to “Yes” and “No”. This column’s category was later changed to factor. Anything besides “Yes” or “No” was recoded as “NA.”</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>hispanic_latino <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>hispanic_latino <span class="sc">==</span> <span class="dv">1</span>,<span class="st">"Yes"</span>,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ifelse</span>(data<span class="sc">$</span>hispanic_latino <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"No"</span>,<span class="cn">NA</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="recode-gender" class="level3">
<h3 class="anchored" data-anchor-id="recode-gender">Recode “gender”</h3>
<p>I followed the same process for recoding the gender variable from numbers to text. Responses outside the range (i.g., circling more than one option, resulting in a double- or triple-digit number) were recoded as “NA.”</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Female"</span>, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ifelse</span>(data<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"Male"</span>, </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ifelse</span>(data<span class="sc">$</span>gender  <span class="sc">==</span> <span class="dv">3</span>, <span class="st">"Non-Binary"</span>, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">ifelse</span>(data<span class="sc">$</span>gender  <span class="sc">==</span> <span class="dv">4</span>, <span class="st">"Prefer not to say"</span>, <span class="cn">NA</span> ))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="recode-currentschoolmusic." class="level3">
<h3 class="anchored" data-anchor-id="recode-currentschoolmusic.">Recode “currentSchoolMusic”.</h3>
<p>Again, I followed the same process for recoding the “currentSchoolMusic” variable from numbers to text.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>currentSchoolMusic <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Band"</span>, </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"Choir"</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">3</span>, <span class="st">"Orchestra"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">4</span>, <span class="st">"Other"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                                                       <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">5</span>, <span class="st">"No music"</span>, <span class="cn">NA</span>)))))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>currentSchoolMusic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Band    Choir No music    Other 
     121      148      368       48 </code></pre>
</div>
</div>
</section>
<section id="replace-na-in-optional-survey-text-boxes-with-none." class="level3">
<h3 class="anchored" data-anchor-id="replace-na-in-optional-survey-text-boxes-with-none.">Replace NA in optional survey text boxes with “None”.</h3>
<p>Textboxes in the survey did not apply to all participants. Hence, many of those boxes were left blank purposefully. In “currentSchoolMusic_other” and “instrument,” I changed “NA” to “None” to make it clear that data were not missing.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currentSchoolMusic_other =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(currentSchoolMusic_other), <span class="st">"None"</span>, currentSchoolMusic_other),</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">instrument =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(instrument), <span class="st">"None"</span>, instrument))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="dealing-with-open-ended-responses" class="level2">
<h2 class="anchored" data-anchor-id="dealing-with-open-ended-responses">Dealing with open-ended responses</h2>
<section id="correcting-inconsistent-data-in-currentschoolmusic_other." class="level3">
<h3 class="anchored" data-anchor-id="correcting-inconsistent-data-in-currentschoolmusic_other.">Correcting inconsistent data in “currentSchoolMusic_other”.</h3>
<p>Some participants checked “Other” for “currentSchoolMusic,” but wrote class names that are not music classes (e.g., Art, Dance) in “currentSchoolMusic_other.” In such cases, I recoded the data in the “currentSchoolMusic” from “Other” to “No music” for those observations. Consequently, I recoded the data in “currentSchoolMusic_other” as “NA” for those observations. One issue that remains is that several participants marked “Other” in “currentSchoolMusic” but did not write the name of the other music class’; it is unclear if all those cases in fact stand for “other music class” or “other elective class” that does not involve music. I did not make changes in those cases.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(data<span class="sc">$</span>currentSchoolMusic_other))<span class="co">#check for missing values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(currentSchoolMusic_other) <span class="co">#look up all distinct/unique answers in variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 1
   currentSchoolMusic_other  
   &lt;chr&gt;                     
 1 None                      
 2 Dance                     
 3 Musical Theatre           
 4 Drama                     
 5 Theatre and Singing       
 6 Piano                     
 7 Art                       
 8 Arts                      
 9 Piano Lessons             
10 piano                     
11 Voice Lessons             
12 private voice lessons     
13 piano/voice lessons       
14 contry                    
15 Voice lessons             
16 dance                     
17 Voice                     
18 Private lesson for guitar.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currentSchoolMusic_other =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"music|sing|voice|guitar|piano"</span>, currentSchoolMusic_other, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>), currentSchoolMusic_other, <span class="st">"NA"</span>))<span class="co">#keep responses containing keywords returned in prevoius code; otherwise, recode as "NA"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(currentSchoolMusic_other) <span class="co">#check if variable now only includes music-related classes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 1
   currentSchoolMusic_other  
   &lt;chr&gt;                     
 1 NA                        
 2 Musical Theatre           
 3 Theatre and Singing       
 4 Piano                     
 5 Piano Lessons             
 6 piano                     
 7 Voice Lessons             
 8 private voice lessons     
 9 piano/voice lessons       
10 Voice lessons             
11 Voice                     
12 Private lesson for guitar.</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currentSchoolMusic =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"music|sing|voice|guitar|piano"</span>, currentSchoolMusic_other, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>), <span class="st">"Other"</span>, currentSchoolMusic))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="in-instrument-change-negative-answers-e.g.-none-i-do-not-play-any-instrument-to-na." class="level3">
<h3 class="anchored" data-anchor-id="in-instrument-change-negative-answers-e.g.-none-i-do-not-play-any-instrument-to-na.">In “instrument,” change negative answers (e.g., None, I do not play any instrument) to “NA.”</h3>
<p>After visually screening the vector for words signaling that the participant does not play an instrument, I found the following words:</p>
<ul>
<li><p>none</p></li>
<li><p>nothing</p></li>
<li><p>not</p></li>
<li><p>don’t</p></li>
<li><p>can’t</p></li>
</ul>
<p>To standardize the responses on that variable, I changed elements containing strings in which those terms are present into “None”.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>instrument <span class="ot">&lt;-</span> data<span class="sc">$</span>instrument <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>()</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(instrument)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 159 × 1
   instrument      
   &lt;chr&gt;           
 1 none            
 2 electric guitar 
 3 nothing         
 4 piano           
 5 voice           
 6 piano and  harp 
 7 piano and  voice
 8 harp            
 9 i don't play one
10 violin          
# ℹ 149 more rows</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">instrument =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(instrument, <span class="st">"don't|dont|never|not|can't|nothing"</span>), <span class="st">"None"</span>, instrument))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(instrument, <span class="st">"voice"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 178 × 65
   survey_id grade   age school race   hispanic_latino gender currentSchoolMusic
       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;             
 1         5     6    NA A      White  No              Female Other             
 2         6     6    12 A      White  No              Female Other             
 3         9     6    11 A      Some … No              Male   Choir             
 4        10     6    12 A      White  No              Female Choir             
 5        11     6    NA A      White  No              Male   Choir             
 6        12     6    12 A      White  No              Female Choir             
 7        13     6    12 A      Black… No              Male   Choir             
 8        14     6    12 A      White  No              Female Choir             
 9        15     6    12 A      Some … No              Male   Choir             
10        16     7    13 A      White  No              Male   Choir             
# ℹ 168 more rows
# ℹ 57 more variables: currentSchoolMusic_other &lt;chr&gt;, s1_1 &lt;dbl&gt;, s1_2 &lt;dbl&gt;,
#   s1_3 &lt;dbl&gt;, s1_4 &lt;dbl&gt;, s1_5 &lt;dbl&gt;, s1_6 &lt;dbl&gt;, s1_7 &lt;dbl&gt;, s1_8 &lt;dbl&gt;,
#   s1_9 &lt;dbl&gt;, s1_10 &lt;dbl&gt;, s1_11 &lt;dbl&gt;, s1_12 &lt;dbl&gt;, s1_13 &lt;dbl&gt;, s2_1 &lt;dbl&gt;,
#   s2_2 &lt;dbl&gt;, s2_3 &lt;dbl&gt;, s2_4 &lt;dbl&gt;, s2_5 &lt;dbl&gt;, s2_6 &lt;dbl&gt;,
#   instrument &lt;chr&gt;, familyMusic &lt;dbl&gt;, schoolChoir &lt;dbl&gt;,
#   schoolInstrumental &lt;dbl&gt;, schoolExtracurricular &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="recode-familymusic" class="level3">
<h3 class="anchored" data-anchor-id="recode-familymusic">Recode “familyMusic”</h3>
<p>1= Yes</p>
<p>2 = No</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">familyMusic =</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_match</span>(familyMusic, </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">2</span> <span class="sc">~</span> <span class="st">"No"</span>, </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Yes"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="save-formatted-dataset-as-.csv" class="level2">
<h2 class="anchored" data-anchor-id="save-formatted-dataset-as-.csv">Save formatted dataset as .csv</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data, <span class="st">"data/middle_school_music_mindsets_clean_1_formated.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb33" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Data Cleaning: Formatting Data"</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Diego Pinto</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">  light: cosmo</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: inline</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="fu"># Formatting/Recoding</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/Desktop/R_projects/msc"</span>) <span class="co">#Set the working directory path </span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># Clear Global Environment</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#load packages</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>The dataset in "middle_school_music_mindsets_raw_may.csv" (*N* *=* 495) represents data collected in May 2023 hrough paper-and-pencil surveys, entered to a spreadsheet manyally, and revised for data entry errors in Excel before being imported into R (I will explain the data entry revision separately). That dataset is "raw" in the sense that it was not yet cleaned for analysis. I saved the .csv files into two dataframes. While I continuously modified the "data" dataframe over the data cleaning process, the "data_raw" dataframe will always contain the original dataset. The dataset in "middle_school_music_mindsets_raw_may.csv" (*N =* 210) represents data collected in September 2023.</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>data_may <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/middle_school_music_mindsets_raw_may.csv"</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"race"</span> <span class="ot">=</span> <span class="st">"c"</span>))</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>data_september <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/middle_school_music_mindsets_raw_september.csv"</span>, <span class="at">col_types =</span> <span class="fu">c</span>(<span class="st">"race"</span> <span class="ot">=</span> <span class="st">"c"</span>))</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_may,data_september) <span class="co">#combine datasets</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a><span class="fu">## Renaming Some Observed Variables</span></span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>I changed some variables' names from codes to texts or shortened those which were too long.</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">currentSchoolMusic =</span> school_music_class,</span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">currentSchoolMusic_other =</span> school_music_class_other,</span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a>         <span class="at">instrument =</span> s2_7,</span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a>         <span class="at">familyMusic =</span> s2_8,</span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a>         <span class="at">schoolChoir =</span> s2_9,</span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a>         <span class="at">schoolInstrumental =</span> s2_10,</span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a>         <span class="at">schoolExtracurricular =</span> s2_11,</span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a>         <span class="at">outsideChoir =</span> s2_12,</span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">outsideInstrumental =</span> s2_13,</span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a>         <span class="at">privateLesson =</span> s2_14,</span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a>         <span class="at">selfTaught =</span> s2_15)</span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a><span class="fu">## Recoding</span></span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a>In the raw dataset, all survey responses were entered as numbers, including data from categorical variables. To facilitate data analysis and interpretation in R, I recoded data from all categorical variables from numbers to text. Recoding will also make data understandable when sharing dataset with other researchers.</span>
<span id="cb33-65"><a href="#cb33-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-66"><a href="#cb33-66" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recode "school"</span></span>
<span id="cb33-67"><a href="#cb33-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-68"><a href="#cb33-68" aria-hidden="true" tabindex="-1"></a>In the raw dataset, schools were labeled as "1", "2", or "3." To facilitate data analysis and interpretation, I recoded "1" as "A", "2" as "B", and "3" as "C".</span>
<span id="cb33-69"><a href="#cb33-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-72"><a href="#cb33-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-73"><a href="#cb33-73" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb33-74"><a href="#cb33-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">school =</span> </span>
<span id="cb33-75"><a href="#cb33-75" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_match</span>(school,</span>
<span id="cb33-76"><a href="#cb33-76" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"A"</span>,</span>
<span id="cb33-77"><a href="#cb33-77" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">2</span> <span class="sc">~</span> <span class="st">"B"</span>,</span>
<span id="cb33-78"><a href="#cb33-78" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">3</span> <span class="sc">~</span> <span class="st">"C"</span>))</span>
<span id="cb33-79"><a href="#cb33-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-80"><a href="#cb33-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-81"><a href="#cb33-81" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recode "race".</span></span>
<span id="cb33-82"><a href="#cb33-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-83"><a href="#cb33-83" aria-hidden="true" tabindex="-1"></a>There were six categories under "race" (matching those in the US Census), and survey participants could select all that applied to them. I inspected the combinations resulting from participants' selections (besides 1 through 6 one-item responses) to determine an effective way to recode the data.</span>
<span id="cb33-84"><a href="#cb33-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-87"><a href="#cb33-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-88"><a href="#cb33-88" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data<span class="sc">$</span>race) <span class="co">#Inspect outputs, including more than one answer for more than one race</span></span>
<span id="cb33-89"><a href="#cb33-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-90"><a href="#cb33-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-91"><a href="#cb33-91" aria-hidden="true" tabindex="-1"></a>Based on the output, I chose to recode "," as " and" for clarity.</span>
<span id="cb33-92"><a href="#cb33-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-95"><a href="#cb33-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-96"><a href="#cb33-96" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb33-97"><a href="#cb33-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"1"</span>, <span class="st">"American Indian or Alaska Native"</span>),</span>
<span id="cb33-98"><a href="#cb33-98" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"2"</span>, <span class="st">"Asian"</span>),</span>
<span id="cb33-99"><a href="#cb33-99" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"3"</span>, <span class="st">"Black or African American"</span>),</span>
<span id="cb33-100"><a href="#cb33-100" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"4"</span>, <span class="st">"Native Hawaiian or Other Pacific Islander"</span>),</span>
<span id="cb33-101"><a href="#cb33-101" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"5"</span>, <span class="st">"White"</span>),</span>
<span id="cb33-102"><a href="#cb33-102" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace</span>(race, <span class="st">"6"</span>, <span class="st">"Some Other Race"</span>),</span>
<span id="cb33-103"><a href="#cb33-103" aria-hidden="true" tabindex="-1"></a>         <span class="at">race =</span> <span class="fu">str_replace_all</span>(race, <span class="st">","</span>, <span class="st">" and "</span>))</span>
<span id="cb33-104"><a href="#cb33-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-105"><a href="#cb33-105" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-106"><a href="#cb33-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-107"><a href="#cb33-107" aria-hidden="true" tabindex="-1"></a><span class="fu">### Combine Race into Fewer Categories</span></span>
<span id="cb33-108"><a href="#cb33-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-109"><a href="#cb33-109" aria-hidden="true" tabindex="-1"></a>Because some categories were were below n = 10, I recoded responses containing "and" as "Two or More Races" to facilitate analysis and to protect participants' identity when sharing dataset. Reporting original count in the Methods section might still be useful.</span>
<span id="cb33-110"><a href="#cb33-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-113"><a href="#cb33-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-114"><a href="#cb33-114" aria-hidden="true" tabindex="-1"></a><span class="co">#Count with raw responses</span></span>
<span id="cb33-115"><a href="#cb33-115" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(data, race) </span>
<span id="cb33-116"><a href="#cb33-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-117"><a href="#cb33-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-118"><a href="#cb33-118" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb33-119"><a href="#cb33-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">as.character</span>(ifelse</span>
<span id="cb33-120"><a href="#cb33-120" aria-hidden="true" tabindex="-1"></a>                             (<span class="fu">str_detect</span>(race, <span class="st">"and"</span>), <span class="st">"Two or More Races"</span>,</span>
<span id="cb33-121"><a href="#cb33-121" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">as.character</span>(race)))) <span class="co">#combining responses which selected two or more races as a single category</span></span>
<span id="cb33-122"><a href="#cb33-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-123"><a href="#cb33-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-124"><a href="#cb33-124" aria-hidden="true" tabindex="-1"></a><span class="co">#Count after change</span></span>
<span id="cb33-125"><a href="#cb33-125" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(data, race)</span>
<span id="cb33-126"><a href="#cb33-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-127"><a href="#cb33-127" aria-hidden="true" tabindex="-1"></a><span class="co">#Since there are less than 10 observations for 'American Indian or Alaska Native', include to category 'Some Other Race' </span></span>
<span id="cb33-128"><a href="#cb33-128" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb33-129"><a href="#cb33-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">ifelse</span>(race <span class="sc">==</span> <span class="st">"American Indian or Alaska Native"</span>, <span class="st">"Some Other Race"</span>, race))</span>
<span id="cb33-130"><a href="#cb33-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-131"><a href="#cb33-131" aria-hidden="true" tabindex="-1"></a><span class="co">#Count after change</span></span>
<span id="cb33-132"><a href="#cb33-132" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(data, race)</span>
<span id="cb33-133"><a href="#cb33-133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-134"><a href="#cb33-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-135"><a href="#cb33-135" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recode "hispanic-latino".</span></span>
<span id="cb33-136"><a href="#cb33-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-137"><a href="#cb33-137" aria-hidden="true" tabindex="-1"></a>In the raw dataset, the ethnicity variable ("Are you Hispanic or Latino?") used "1" for "Yes" and 2 for "No." To facilidate data analysis and interpretation, I converted the data to "Yes" and "No". This column's category was later changed to factor. Anything besides "Yes" or "No" was recoded as "NA."</span>
<span id="cb33-138"><a href="#cb33-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-141"><a href="#cb33-141" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-142"><a href="#cb33-142" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>hispanic_latino <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>hispanic_latino <span class="sc">==</span> <span class="dv">1</span>,<span class="st">"Yes"</span>,</span>
<span id="cb33-143"><a href="#cb33-143" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ifelse</span>(data<span class="sc">$</span>hispanic_latino <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"No"</span>,<span class="cn">NA</span>))</span>
<span id="cb33-144"><a href="#cb33-144" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-145"><a href="#cb33-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-146"><a href="#cb33-146" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recode "gender"</span></span>
<span id="cb33-147"><a href="#cb33-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-148"><a href="#cb33-148" aria-hidden="true" tabindex="-1"></a>I followed the same process for recoding the gender variable from numbers to text. Responses outside the range (i.g., circling more than one option, resulting in a double- or triple-digit number) were recoded as "NA."</span>
<span id="cb33-149"><a href="#cb33-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-152"><a href="#cb33-152" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-153"><a href="#cb33-153" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Female"</span>, </span>
<span id="cb33-154"><a href="#cb33-154" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ifelse</span>(data<span class="sc">$</span>gender <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"Male"</span>, </span>
<span id="cb33-155"><a href="#cb33-155" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ifelse</span>(data<span class="sc">$</span>gender  <span class="sc">==</span> <span class="dv">3</span>, <span class="st">"Non-Binary"</span>, </span>
<span id="cb33-156"><a href="#cb33-156" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">ifelse</span>(data<span class="sc">$</span>gender  <span class="sc">==</span> <span class="dv">4</span>, <span class="st">"Prefer not to say"</span>, <span class="cn">NA</span> ))))</span>
<span id="cb33-157"><a href="#cb33-157" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-158"><a href="#cb33-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-159"><a href="#cb33-159" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recode "currentSchoolMusic".</span></span>
<span id="cb33-160"><a href="#cb33-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-161"><a href="#cb33-161" aria-hidden="true" tabindex="-1"></a>Again, I followed the same process for recoding the "currentSchoolMusic" variable from numbers to text.</span>
<span id="cb33-162"><a href="#cb33-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-165"><a href="#cb33-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-166"><a href="#cb33-166" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>currentSchoolMusic <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Band"</span>, </span>
<span id="cb33-167"><a href="#cb33-167" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"Choir"</span>,</span>
<span id="cb33-168"><a href="#cb33-168" aria-hidden="true" tabindex="-1"></a>                                         <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">3</span>, <span class="st">"Orchestra"</span>,</span>
<span id="cb33-169"><a href="#cb33-169" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">4</span>, <span class="st">"Other"</span>,</span>
<span id="cb33-170"><a href="#cb33-170" aria-hidden="true" tabindex="-1"></a>                                                       <span class="fu">ifelse</span>(data<span class="sc">$</span>currentSchoolMusic <span class="sc">==</span> <span class="dv">5</span>, <span class="st">"No music"</span>, <span class="cn">NA</span>)))))</span>
<span id="cb33-171"><a href="#cb33-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-172"><a href="#cb33-172" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>currentSchoolMusic)</span>
<span id="cb33-173"><a href="#cb33-173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-174"><a href="#cb33-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-175"><a href="#cb33-175" aria-hidden="true" tabindex="-1"></a><span class="fu">### Replace NA in optional survey text boxes with "None".</span></span>
<span id="cb33-176"><a href="#cb33-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-177"><a href="#cb33-177" aria-hidden="true" tabindex="-1"></a>Textboxes in the survey did not apply to all participants. Hence, many of those boxes were left blank purposefully. In "currentSchoolMusic_other" and "instrument," I changed "NA" to "None" to make it clear that data were not missing.</span>
<span id="cb33-178"><a href="#cb33-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-181"><a href="#cb33-181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-182"><a href="#cb33-182" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb33-183"><a href="#cb33-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currentSchoolMusic_other =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(currentSchoolMusic_other), <span class="st">"None"</span>, currentSchoolMusic_other),</span>
<span id="cb33-184"><a href="#cb33-184" aria-hidden="true" tabindex="-1"></a>         <span class="at">instrument =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(instrument), <span class="st">"None"</span>, instrument))</span>
<span id="cb33-185"><a href="#cb33-185" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-186"><a href="#cb33-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-187"><a href="#cb33-187" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dealing with open-ended responses</span></span>
<span id="cb33-188"><a href="#cb33-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-189"><a href="#cb33-189" aria-hidden="true" tabindex="-1"></a><span class="fu">### Correcting inconsistent data in "currentSchoolMusic_other".</span></span>
<span id="cb33-190"><a href="#cb33-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-191"><a href="#cb33-191" aria-hidden="true" tabindex="-1"></a>Some participants checked "Other" for "currentSchoolMusic," but wrote class names that are not music classes (e.g., Art, Dance) in "currentSchoolMusic_other." In such cases, I recoded the data in the "currentSchoolMusic" from "Other" to "No music" for those observations. Consequently, I recoded the data in "currentSchoolMusic_other" as "NA" for those observations. One issue that remains is that several participants marked "Other" in "currentSchoolMusic" but did not write the name of the other music class'; it is unclear if all those cases in fact stand for "other music class" or "other elective class" that does not involve music. I did not make changes in those cases.</span>
<span id="cb33-192"><a href="#cb33-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-195"><a href="#cb33-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-196"><a href="#cb33-196" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(data<span class="sc">$</span>currentSchoolMusic_other))<span class="co">#check for missing values</span></span>
<span id="cb33-197"><a href="#cb33-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-198"><a href="#cb33-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-199"><a href="#cb33-199" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb33-200"><a href="#cb33-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(currentSchoolMusic_other) <span class="co">#look up all distinct/unique answers in variable</span></span>
<span id="cb33-201"><a href="#cb33-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-202"><a href="#cb33-202" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb33-203"><a href="#cb33-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currentSchoolMusic_other =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"music|sing|voice|guitar|piano"</span>, currentSchoolMusic_other, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>), currentSchoolMusic_other, <span class="st">"NA"</span>))<span class="co">#keep responses containing keywords returned in prevoius code; otherwise, recode as "NA"</span></span>
<span id="cb33-204"><a href="#cb33-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-205"><a href="#cb33-205" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb33-206"><a href="#cb33-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(currentSchoolMusic_other) <span class="co">#check if variable now only includes music-related classes</span></span>
<span id="cb33-207"><a href="#cb33-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-208"><a href="#cb33-208" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb33-209"><a href="#cb33-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">currentSchoolMusic =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"music|sing|voice|guitar|piano"</span>, currentSchoolMusic_other, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>), <span class="st">"Other"</span>, currentSchoolMusic))</span>
<span id="cb33-210"><a href="#cb33-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-211"><a href="#cb33-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-212"><a href="#cb33-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-213"><a href="#cb33-213" aria-hidden="true" tabindex="-1"></a><span class="fu">### In "instrument," change negative answers (e.g., None, I do not play any instrument) to "NA."</span></span>
<span id="cb33-214"><a href="#cb33-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-215"><a href="#cb33-215" aria-hidden="true" tabindex="-1"></a>After visually screening the vector for words signaling that the participant does not play an instrument, I found the following words:</span>
<span id="cb33-216"><a href="#cb33-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-217"><a href="#cb33-217" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>none</span>
<span id="cb33-218"><a href="#cb33-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-219"><a href="#cb33-219" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>nothing</span>
<span id="cb33-220"><a href="#cb33-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-221"><a href="#cb33-221" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>not</span>
<span id="cb33-222"><a href="#cb33-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-223"><a href="#cb33-223" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>don't</span>
<span id="cb33-224"><a href="#cb33-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-225"><a href="#cb33-225" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>can't</span>
<span id="cb33-226"><a href="#cb33-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-227"><a href="#cb33-227" aria-hidden="true" tabindex="-1"></a>To standardize the responses on that variable, I changed elements containing strings in which those terms are present into "None".</span>
<span id="cb33-228"><a href="#cb33-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-231"><a href="#cb33-231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-232"><a href="#cb33-232" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>instrument <span class="ot">&lt;-</span> data<span class="sc">$</span>instrument <span class="sc">%&gt;%</span> </span>
<span id="cb33-233"><a href="#cb33-233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tolower</span>()</span>
<span id="cb33-234"><a href="#cb33-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-235"><a href="#cb33-235" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb33-236"><a href="#cb33-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(instrument)</span>
<span id="cb33-237"><a href="#cb33-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-238"><a href="#cb33-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-239"><a href="#cb33-239" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb33-240"><a href="#cb33-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">instrument =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(instrument, <span class="st">"don't|dont|never|not|can't|nothing"</span>), <span class="st">"None"</span>, instrument))</span>
<span id="cb33-241"><a href="#cb33-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-242"><a href="#cb33-242" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb33-243"><a href="#cb33-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(instrument, <span class="st">"voice"</span>))</span>
<span id="cb33-244"><a href="#cb33-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-245"><a href="#cb33-245" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-246"><a href="#cb33-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-247"><a href="#cb33-247" aria-hidden="true" tabindex="-1"></a><span class="fu">### Recode "familyMusic"</span></span>
<span id="cb33-248"><a href="#cb33-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-249"><a href="#cb33-249" aria-hidden="true" tabindex="-1"></a>1= Yes</span>
<span id="cb33-250"><a href="#cb33-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-251"><a href="#cb33-251" aria-hidden="true" tabindex="-1"></a>2 = No</span>
<span id="cb33-252"><a href="#cb33-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-255"><a href="#cb33-255" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-256"><a href="#cb33-256" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb33-257"><a href="#cb33-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">familyMusic =</span> </span>
<span id="cb33-258"><a href="#cb33-258" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_match</span>(familyMusic, </span>
<span id="cb33-259"><a href="#cb33-259" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">2</span> <span class="sc">~</span> <span class="st">"No"</span>, </span>
<span id="cb33-260"><a href="#cb33-260" aria-hidden="true" tabindex="-1"></a>                      <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Yes"</span>))</span>
<span id="cb33-261"><a href="#cb33-261" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb33-262"><a href="#cb33-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-263"><a href="#cb33-263" aria-hidden="true" tabindex="-1"></a><span class="fu">## Save formatted dataset as .csv</span></span>
<span id="cb33-264"><a href="#cb33-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-267"><a href="#cb33-267" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb33-268"><a href="#cb33-268" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data, <span class="st">"data/middle_school_music_mindsets_clean_1_formated.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb33-269"><a href="#cb33-269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>